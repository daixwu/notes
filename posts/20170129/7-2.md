# Array æ•°ç»„çš„æ–¹æ³•

## è½¬æ•°ç»„

### `Array.from()`

[Array.from](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/from)æ–¹æ³•ç”¨äºå°†ä¸¤ç±»å¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼šç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼ˆarray-like objectï¼‰å’Œå¯éå†ï¼ˆiterableï¼‰çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬ ES6 æ–°å¢çš„æ•°æ®ç»“æ„ Set å’Œ Mapï¼‰ã€‚

ä¸‹é¢æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œ`Array.from`å°†å®ƒè½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚

```js
let arrayLike = {
  "0": "a",
  "1": "b",
  "2": "c",
  length: 3
};

// ES5çš„å†™æ³•
var arr1 = [].slice.call(arrayLike); // ['a', 'b', 'c']

// ES6çš„å†™æ³•
let arr2 = Array.from(arrayLike); // ['a', 'b', 'c']
```

å®é™…åº”ç”¨ä¸­ï¼Œå¸¸è§çš„ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡æ˜¯ DOM æ“ä½œè¿”å›çš„ NodeList é›†åˆï¼Œä»¥åŠå‡½æ•°å†…éƒ¨çš„ arguments å¯¹è±¡ã€‚`Array.from`éƒ½å¯ä»¥å°†å®ƒä»¬è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚

```js
// NodeListå¯¹è±¡
let ps = document.querySelectorAll("p");
Array.from(ps).filter(p => {
  return p.textContent.length > 100;
});

// argumentså¯¹è±¡
function foo() {
  var args = Array.from(arguments);
  // ...
}
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ`querySelectorAll`æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œå¯ä»¥å°†è¿™ä¸ªå¯¹è±¡è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼Œå†ä½¿ç”¨`filter`æ–¹æ³•ã€‚

åªè¦æ˜¯éƒ¨ç½²äº† `Iterator` æ¥å£çš„æ•°æ®ç»“æ„ï¼Œ`Array.from`éƒ½èƒ½å°†å…¶è½¬ä¸ºæ•°ç»„ã€‚

```js
Array.from("hello");
// ['h', 'e', 'l', 'l', 'o']

let namesSet = new Set(["a", "b"]);
Array.from(namesSet); // ['a', 'b']
```

ä¸Šé¢ä»£ç ä¸­ï¼Œå­—ç¬¦ä¸²å’Œ Set ç»“æ„éƒ½å…·æœ‰ Iterator æ¥å£ï¼Œå› æ­¤å¯ä»¥è¢«`Array.from`è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ã€‚

å¦‚æœå‚æ•°æ˜¯ä¸€ä¸ªçœŸæ­£çš„æ•°ç»„ï¼Œ`Array.from`ä¼šè¿”å›ä¸€ä¸ªä¸€æ¨¡ä¸€æ ·çš„æ–°æ•°ç»„ã€‚

```js
Array.from([1, 2, 3]);
// [1, 2, 3]
```

å€¼å¾—æé†’çš„æ˜¯ï¼Œæ‰©å±•è¿ç®—ç¬¦ï¼ˆ`...`ï¼‰ä¹Ÿå¯ä»¥å°†æŸäº›æ•°æ®ç»“æ„è½¬ä¸ºæ•°ç»„ã€‚

```js
// argumentså¯¹è±¡
function foo() {
  const args = [...arguments];
}

// NodeListå¯¹è±¡
[...document.querySelectorAll("div")];
```

æ‰©å±•è¿ç®—ç¬¦èƒŒåè°ƒç”¨çš„æ˜¯éå†å™¨æ¥å£ï¼ˆSymbol.iteratorï¼‰ï¼Œå¦‚æœä¸€ä¸ªå¯¹è±¡æ²¡æœ‰éƒ¨ç½²è¿™ä¸ªæ¥å£ï¼Œå°±æ— æ³•è½¬æ¢ã€‚`Array.from`æ–¹æ³•è¿˜æ”¯æŒç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ã€‚æ‰€è°“ç±»ä¼¼æ•°ç»„çš„å¯¹è±¡ï¼Œæœ¬è´¨ç‰¹å¾åªæœ‰ä¸€ç‚¹ï¼Œå³å¿…é¡»æœ‰`length`å±æ€§ã€‚å› æ­¤ï¼Œä»»ä½•æœ‰`length`å±æ€§çš„å¯¹è±¡ï¼Œéƒ½å¯ä»¥é€šè¿‡`Array.from`æ–¹æ³•è½¬ä¸ºæ•°ç»„ï¼Œè€Œæ­¤æ—¶æ‰©å±•è¿ç®—ç¬¦å°±æ— æ³•è½¬æ¢ã€‚

`Array.from`è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œä½œç”¨ç±»ä¼¼äºæ•°ç»„çš„`map`æ–¹æ³•ï¼Œç”¨æ¥å¯¹æ¯ä¸ªå…ƒç´ è¿›è¡Œå¤„ç†ï¼Œå°†å¤„ç†åçš„å€¼æ”¾å…¥è¿”å›çš„æ•°ç»„ã€‚

```js
Array.from(arrayLike, x => x * x);
// ç­‰åŒäº
Array.from(arrayLike).map(x => x * x);

Array.from([1, 2, 3], x => x * x);
// [1, 4, 9]
```

ä¸‹é¢çš„ä¾‹å­æ˜¯å–å‡ºä¸€ç»„ DOM èŠ‚ç‚¹çš„æ–‡æœ¬å†…å®¹ã€‚

```js
let spans = document.querySelectorAll("span.name");

// map()
let names1 = Array.prototype.map.call(spans, s => s.textContent);

// Array.from()
let names2 = Array.from(spans, s => s.textContent);
```

ä¸‹é¢çš„ä¾‹å­å°†æ•°ç»„ä¸­å¸ƒå°”å€¼ä¸º`false`çš„æˆå‘˜è½¬ä¸º 0ã€‚

```js
Array.from([1, , 2, , 3], n => n || 0);
// [1, 0, 2, 0, 3]
```

å¦ä¸€ä¸ªä¾‹å­æ˜¯è¿”å›å„ç§æ•°æ®çš„ç±»å‹ã€‚

```js
function typesOf() {
  return Array.from(arguments, value => typeof value);
}
typesOf(null, [], NaN);
// ['object', 'object', 'number']
```

å¦‚æœ`map`å‡½æ•°é‡Œé¢ç”¨åˆ°äº†`this`å…³é”®å­—ï¼Œè¿˜å¯ä»¥ä¼ å…¥`Array.from`çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®š`this`ã€‚

`Array.from()`å¯ä»¥å°†å„ç§å€¼è½¬ä¸ºçœŸæ­£çš„æ•°ç»„ï¼Œå¹¶ä¸”è¿˜æä¾›`map`åŠŸèƒ½ã€‚è¿™å®é™…ä¸Šæ„å‘³ç€ï¼Œåªè¦æœ‰ä¸€ä¸ªåŸå§‹çš„æ•°æ®ç»“æ„ï¼Œä½ å°±å¯ä»¥å…ˆå¯¹å®ƒçš„å€¼è¿›è¡Œå¤„ç†ï¼Œç„¶åè½¬æˆè§„èŒƒçš„æ•°ç»„ç»“æ„ï¼Œè¿›è€Œå°±å¯ä»¥ä½¿ç”¨æ•°é‡ä¼—å¤šçš„æ•°ç»„æ–¹æ³•ã€‚

```js
Array.from({ length: 2 }, () => "jack");
// ['jack', 'jack']
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ`Array.from`çš„ç¬¬ä¸€ä¸ªå‚æ•°æŒ‡å®šäº†ç¬¬äºŒä¸ªå‚æ•°è¿è¡Œçš„æ¬¡æ•°ã€‚è¿™ç§ç‰¹æ€§å¯ä»¥è®©è¯¥æ–¹æ³•çš„ç”¨æ³•å˜å¾—éå¸¸çµæ´»ã€‚

`Array.from()`çš„å¦ä¸€ä¸ªåº”ç”¨æ˜¯ï¼Œå°†å­—ç¬¦ä¸²è½¬ä¸ºæ•°ç»„ï¼Œç„¶åè¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚å› ä¸ºå®ƒèƒ½æ­£ç¡®å¤„ç†å„ç§ `Unicode` å­—ç¬¦ï¼Œå¯ä»¥é¿å… `JavaScript` å°†å¤§äº`\uFFFF`çš„ `Unicode` å­—ç¬¦ï¼Œç®—ä½œä¸¤ä¸ªå­—ç¬¦çš„ `bug`ã€‚

```js
function countSymbols(string) {
  return Array.from(string).length;
}
```

### `Array.of()`

[Array.of](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/of)æ–¹æ³•ç”¨äºå°†ä¸€ç»„å€¼ï¼Œè½¬æ¢ä¸ºæ•°ç»„ã€‚

```js
Array.of(3, 11, 8); // [3,11,8]
Array.of(3); // [3]
Array.of(3).length; // 1
```

è¿™ä¸ªæ–¹æ³•çš„ä¸»è¦ç›®çš„ï¼Œæ˜¯å¼¥è¡¥æ•°ç»„æ„é€ å‡½æ•°`Array()`çš„ä¸è¶³ã€‚å› ä¸ºå‚æ•°ä¸ªæ•°çš„ä¸åŒï¼Œä¼šå¯¼è‡´`Array()`çš„è¡Œä¸ºæœ‰å·®å¼‚ã€‚

```js
Array(); // []
Array(3); // [, , ,]
Array(3, 11, 8); // [3, 11, 8]
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ`Array`æ–¹æ³•æ²¡æœ‰å‚æ•°ã€ä¸€ä¸ªå‚æ•°ã€ä¸‰ä¸ªå‚æ•°æ—¶ï¼Œè¿”å›ç»“æœéƒ½ä¸ä¸€æ ·ã€‚åªæœ‰å½“å‚æ•°ä¸ªæ•°ä¸å°‘äº 2 ä¸ªæ—¶ï¼Œ`Array()`æ‰ä¼šè¿”å›ç”±å‚æ•°ç»„æˆçš„æ–°æ•°ç»„ã€‚å‚æ•°ä¸ªæ•°åªæœ‰ä¸€ä¸ªæ—¶ï¼Œå®é™…ä¸Šæ˜¯æŒ‡å®šæ•°ç»„çš„é•¿åº¦ã€‚

`Array.of`åŸºæœ¬ä¸Šå¯ä»¥ç”¨æ¥æ›¿ä»£`Array()`æˆ–`new Array()`ï¼Œå¹¶ä¸”ä¸å­˜åœ¨ç”±äºå‚æ•°ä¸åŒè€Œå¯¼è‡´çš„é‡è½½ã€‚å®ƒçš„è¡Œä¸ºéå¸¸ç»Ÿä¸€ã€‚

`Array.of`æ€»æ˜¯è¿”å›å‚æ•°å€¼ç»„æˆçš„æ•°ç»„ã€‚å¦‚æœæ²¡æœ‰å‚æ•°ï¼Œå°±è¿”å›ä¸€ä¸ªç©ºæ•°ç»„ã€‚å¯ä»¥ç”¨ä¸‹é¢çš„ä»£ç æ¨¡æ‹Ÿå®ç°ã€‚

```js
function ArrayOf() {
  return [].slice.call(arguments);
}
```

## åˆ¤æ–­æ˜¯å¦ä¸ºæ•°ç»„

### `Array.isArray()`

[Array.isArray](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray) ç”¨äºç¡®å®šä¼ é€’çš„å€¼æ˜¯å¦æ˜¯ä¸€ä¸ª Arrayã€‚

```js
// ä¸‹é¢çš„å‡½æ•°è°ƒç”¨éƒ½è¿”å› true
Array.isArray([]);
Array.isArray([1]);
Array.isArray(new Array());
// é²œä¸ºäººçŸ¥çš„äº‹å®ï¼šå…¶å® Array.prototype ä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„ã€‚
Array.isArray(Array.prototype);

// ä¸‹é¢çš„å‡½æ•°è°ƒç”¨éƒ½è¿”å› false
Array.isArray();
Array.isArray({});
Array.isArray(null);
Array.isArray(undefined);
Array.isArray(17);
Array.isArray('Array');
Array.isArray(true);
Array.isArray(false);
Array.isArray({ __proto__: Array.prototype });
```

## å¤åˆ¶æ•°ç»„æˆå‘˜

### `Array.prototype.copyWithin()`

[Array.prototype.copyWithin](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/copyWithin)æ–¹æ³•ï¼Œåœ¨å½“å‰æ•°ç»„å†…éƒ¨ï¼Œå°†æŒ‡å®šä½ç½®çš„æˆå‘˜å¤åˆ¶åˆ°å…¶ä»–ä½ç½®ï¼ˆä¼šè¦†ç›–åŸæœ‰æˆå‘˜ï¼‰ï¼Œç„¶åè¿”å›å½“å‰æ•°ç»„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä¼šä¿®æ”¹å½“å‰æ•°ç»„ã€‚

```js
Array.prototype.copyWithin(target, (start = 0), (end = this.length));
```

å®ƒæ¥å—ä¸‰ä¸ªå‚æ•°ã€‚

- targetï¼ˆå¿…éœ€ï¼‰ï¼šä»è¯¥ä½ç½®å¼€å§‹æ›¿æ¢æ•°æ®ã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºå€’æ•°ã€‚
- startï¼ˆå¯é€‰ï¼‰ï¼šä»è¯¥ä½ç½®å¼€å§‹è¯»å–æ•°æ®ï¼Œé»˜è®¤ä¸º 0ã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºä»æœ«å°¾å¼€å§‹è®¡ç®—ã€‚
- endï¼ˆå¯é€‰ï¼‰ï¼šåˆ°è¯¥ä½ç½®å‰åœæ­¢è¯»å–æ•°æ®ï¼Œé»˜è®¤ç­‰äºæ•°ç»„é•¿åº¦ã€‚å¦‚æœä¸ºè´Ÿå€¼ï¼Œè¡¨ç¤ºä»æœ«å°¾å¼€å§‹è®¡ç®—ã€‚

è¿™ä¸‰ä¸ªå‚æ•°éƒ½åº”è¯¥æ˜¯æ•°å€¼ï¼Œå¦‚æœä¸æ˜¯ï¼Œä¼šè‡ªåŠ¨è½¬ä¸ºæ•°å€¼ã€‚

```js
[1, 2, 3, 4, 5].copyWithin(0, 3);
// [4, 5, 3, 4, 5]
```

ä¸Šé¢ä»£ç è¡¨ç¤ºå°†ä» 3 å·ä½ç›´åˆ°æ•°ç»„ç»“æŸçš„æˆå‘˜ï¼ˆ4 å’Œ 5ï¼‰ï¼Œå¤åˆ¶åˆ°ä» 0 å·ä½å¼€å§‹çš„ä½ç½®ï¼Œç»“æœè¦†ç›–äº†åŸæ¥çš„ 1 å’Œ 2ã€‚

ä¸‹é¢æ˜¯æ›´å¤šä¾‹å­ã€‚

```js
// å°†3å·ä½å¤åˆ¶åˆ°0å·ä½
[1, 2, 3, 4, 5].copyWithin(0, 3, 4)
// [4, 2, 3, 4, 5]

// -2ç›¸å½“äº3å·ä½ï¼Œ-1ç›¸å½“äº4å·ä½
[1, 2, 3, 4, 5].copyWithin(0, -2, -1)
// [4, 2, 3, 4, 5]

// å°†3å·ä½å¤åˆ¶åˆ°0å·ä½
[].copyWithin.call({length: 5, 3: 1}, 0, 3)
// {0: 1, 3: 1, length: 5}
```

## æ•°ç»„æˆå‘˜æŸ¥æ‰¾

### `Array.prototype.find()`

æ•°ç»„å®ä¾‹çš„`find`æ–¹æ³•ï¼Œç”¨äºæ‰¾å‡ºç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜ã€‚å®ƒçš„å‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œæ‰€æœ‰æ•°ç»„æˆå‘˜ä¾æ¬¡æ‰§è¡Œè¯¥å›è°ƒå‡½æ•°ï¼Œç›´åˆ°æ‰¾å‡ºç¬¬ä¸€ä¸ªè¿”å›å€¼ä¸º`true`çš„æˆå‘˜ï¼Œç„¶åè¿”å›è¯¥æˆå‘˜ã€‚å¦‚æœæ²¡æœ‰ç¬¦åˆæ¡ä»¶çš„æˆå‘˜ï¼Œåˆ™è¿”å›`undefined`ã€‚

```js
[1, 4, -5, 10].find(n => n < 0);
// -5
```

ä¸Šé¢ä»£ç æ‰¾å‡ºæ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå°äº 0 çš„æˆå‘˜ã€‚

```js
[1, 5, 10, 15].find(function(value, index, arr) {
  return value > 9;
}); // 10
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ`find`æ–¹æ³•çš„å›è°ƒå‡½æ•°å¯ä»¥æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œä¾æ¬¡ä¸ºå½“å‰çš„å€¼ã€å½“å‰çš„ä½ç½®å’ŒåŸæ•°ç»„ã€‚

æ•°ç»„å®ä¾‹çš„`findIndex`æ–¹æ³•çš„ç”¨æ³•ä¸`find`æ–¹æ³•éå¸¸ç±»ä¼¼ï¼Œè¿”å›ç¬¬ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„æ•°ç»„æˆå‘˜çš„ä½ç½®ï¼Œå¦‚æœæ‰€æœ‰æˆå‘˜éƒ½ä¸ç¬¦åˆæ¡ä»¶ï¼Œåˆ™è¿”å›`-1`ã€‚

```js
[1, 5, 10, 15].findIndex(function(value, index, arr) {
  return value > 9;
}); // 2
```

è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®šå›è°ƒå‡½æ•°çš„`this`å¯¹è±¡ã€‚

```js
function f(v) {
  return v > this.age;
}
let person = { name: "John", age: 20 };
[10, 12, 26, 15].find(f, person); // 26
```

ä¸Šé¢çš„ä»£ç ä¸­ï¼Œ`find`å‡½æ•°æ¥æ”¶äº†ç¬¬äºŒä¸ªå‚æ•°`person`å¯¹è±¡ï¼Œå›è°ƒå‡½æ•°ä¸­çš„`this`å¯¹è±¡æŒ‡å‘`person`å¯¹è±¡ã€‚

å¦å¤–ï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½å¯ä»¥å‘ç°`NaN`ï¼Œå¼¥è¡¥äº†æ•°ç»„çš„`indexOf`æ–¹æ³•çš„ä¸è¶³ã€‚

```js
[NaN]
  .indexOf(NaN)
  // -1

  [NaN].findIndex(y => Object.is(NaN, y));
// 0
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ`indexOf`æ–¹æ³•æ— æ³•è¯†åˆ«æ•°ç»„çš„`NaN`æˆå‘˜ï¼Œä½†æ˜¯`findIndex`æ–¹æ³•å¯ä»¥å€ŸåŠ©`Object.is`æ–¹æ³•åšåˆ°ã€‚

## å¡«å……æ•°ç»„

### `Array.prototype.fill()`

[Array.prototype.fill](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/fill)æ–¹æ³•ä½¿ç”¨ç»™å®šå€¼ï¼Œå¡«å……ä¸€ä¸ªæ•°ç»„ã€‚

```js
["a", "b", "c"].fill(7);
// [7, 7, 7]

new Array(3).fill(7);
// [7, 7, 7]
```

ä¸Šé¢ä»£ç è¡¨æ˜ï¼Œ`fill`æ–¹æ³•ç”¨äºç©ºæ•°ç»„çš„åˆå§‹åŒ–éå¸¸æ–¹ä¾¿ã€‚æ•°ç»„ä¸­å·²æœ‰çš„å…ƒç´ ï¼Œä¼šè¢«å…¨éƒ¨æŠ¹å»ã€‚

`fill`æ–¹æ³•è¿˜å¯ä»¥æ¥å—ç¬¬äºŒä¸ªå’Œç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œç”¨äºæŒ‡å®šå¡«å……çš„èµ·å§‹ä½ç½®å’Œç»“æŸä½ç½®ã€‚

```js
["a", "b", "c"].fill(7, 1, 2);
// ['a', 7, 'c']
```

ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œ`fill`æ–¹æ³•ä» 1 å·ä½å¼€å§‹ï¼Œå‘åŸæ•°ç»„å¡«å…… 7ï¼Œåˆ° 2 å·ä½ä¹‹å‰ç»“æŸã€‚

æ³¨æ„ï¼Œå¦‚æœå¡«å……çš„ç±»å‹ä¸ºå¯¹è±¡ï¼Œé‚£ä¹ˆè¢«èµ‹å€¼çš„æ˜¯åŒä¸€ä¸ªå†…å­˜åœ°å€çš„å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ·±æ‹·è´å¯¹è±¡ã€‚

```js
let arr = new Array(3).fill({ name: "Mike" });
arr[0].name = "Ben";
arr;
// [{name: "Ben"}, {name: "Ben"}, {name: "Ben"}]

let arr = new Array(3).fill([]);
arr[0].push(5);
arr;
// [[5], [5], [5]]
```

## éå†æ•°ç»„

### `Array.prototype.entries()` `Array.prototype.keys()` `Array.prototype.values()`

ES6 æä¾›ä¸‰ä¸ªæ–°çš„æ–¹æ³•â€”â€”`entries()`ï¼Œ`keys()`å’Œ`values()`â€”â€”ç”¨äºéå†æ•°ç»„ã€‚å®ƒä»¬éƒ½è¿”å›ä¸€ä¸ªéå†å™¨å¯¹è±¡ï¼Œå¯ä»¥ç”¨`for...of`å¾ªç¯è¿›è¡Œéå†ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯`keys()`æ˜¯å¯¹é”®åçš„éå†ã€`values()`æ˜¯å¯¹é”®å€¼çš„éå†ï¼Œ`entries()`æ˜¯å¯¹é”®å€¼å¯¹çš„éå†ã€‚

```js
for (let index of ["a", "b"].keys()) {
  console.log(index);
}
// 0
// 1

for (let elem of ["a", "b"].values()) {
  console.log(elem);
}
// 'a'
// 'b'

for (let [index, elem] of ["a", "b"].entries()) {
  console.log(index, elem);
}
// 0 "a"
// 1 "b"
```

å¦‚æœä¸ä½¿ç”¨`for...of`å¾ªç¯ï¼Œå¯ä»¥æ‰‹åŠ¨è°ƒç”¨éå†å™¨å¯¹è±¡çš„`next`æ–¹æ³•ï¼Œè¿›è¡Œéå†ã€‚

```js
let letter = ["a", "b", "c"];
let entries = letter.entries();
console.log(entries.next().value); // [0, 'a']
console.log(entries.next().value); // [1, 'b']
console.log(entries.next().value); // [2, 'c']
```

### `Array.prototype.every()`

[Array.prototype.every](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/every)æµ‹è¯•ä¸€ä¸ªæ•°ç»„å†…çš„æ‰€æœ‰å…ƒç´ æ˜¯å¦éƒ½èƒ½é€šè¿‡æŸä¸ªæŒ‡å®šå‡½æ•°çš„æµ‹è¯•ã€‚å®ƒè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚

```js
arr.every(callback[, thisArg])
```

**å‚æ•°**:

`callback` ç”¨æ¥æµ‹è¯•æ¯ä¸ªå…ƒç´ çš„å‡½æ•°ï¼Œå®ƒå¯ä»¥æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š

- element ç”¨äºæµ‹è¯•çš„å½“å‰å€¼ã€‚
- index å¯é€‰ ç”¨äºæµ‹è¯•çš„å½“å‰å€¼çš„ç´¢å¼•ã€‚
- array å¯é€‰ è°ƒç”¨ every çš„å½“å‰æ•°ç»„ã€‚

`thisArg` æ‰§è¡Œ `callback` æ—¶ä½¿ç”¨çš„ `this` å€¼ã€‚

**è¿”å›å€¼**:

å¦‚æœå›è°ƒå‡½æ•°çš„æ¯ä¸€æ¬¡è¿”å›éƒ½ä¸º `truthy` å€¼ï¼Œè¿”å› `true`ï¼Œå¦åˆ™è¿”å› `false`ã€‚

```js
function isBigEnough(element, index, array) {
  return element >= 10;
}
[12, 5, 8, 130, 44].every(isBigEnough); // false
[12, 54, 18, 130, 44].every(isBigEnough); // true

[12, 5, 8, 130, 44].every(x => x >= 10); // false
[12, 54, 18, 130, 44].every(x => x >= 10); // true
```

> æ³¨æ„ï¼šè‹¥æ”¶åˆ°ä¸€ä¸ªç©ºæ•°ç»„ï¼Œæ­¤æ–¹æ³•åœ¨ä¸€åˆ‡æƒ…å†µä¸‹éƒ½ä¼šè¿”å› trueã€‚

### `Array.prototype.filter()`

[Array.prototype.filter](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„, å…¶åŒ…å«é€šè¿‡æ‰€æä¾›å‡½æ•°å®ç°çš„æµ‹è¯•çš„æ‰€æœ‰å…ƒç´ ã€‚

```js
let newArray = arr.filter(callback(element[, index[, array]])[, thisArg])
```

**å‚æ•°**:

`callback` ç”¨æ¥æµ‹è¯•æ•°ç»„çš„æ¯ä¸ªå…ƒç´ çš„å‡½æ•°ã€‚è¿”å› `true` è¡¨ç¤ºè¯¥å…ƒç´ é€šè¿‡æµ‹è¯•ï¼Œä¿ç•™è¯¥å…ƒç´ ï¼Œ`false` åˆ™ä¸ä¿ç•™ã€‚å®ƒæ¥å—ä»¥ä¸‹ä¸‰ä¸ªå‚æ•°ï¼š

- element æ•°ç»„ä¸­å½“å‰æ­£åœ¨å¤„ç†çš„å…ƒç´ ã€‚
- index å¯é€‰ æ­£åœ¨å¤„ç†çš„å…ƒç´ åœ¨æ•°ç»„ä¸­çš„ç´¢å¼•ã€‚
  -array å¯é€‰ è°ƒç”¨äº† filter çš„æ•°ç»„æœ¬èº«ã€‚

`thisArg`å¯é€‰ æ‰§è¡Œ `callback` æ—¶ï¼Œç”¨äº `this` çš„å€¼ã€‚

**è¿”å›å€¼**:

ä¸€ä¸ªæ–°çš„ã€ç”±é€šè¿‡æµ‹è¯•çš„å…ƒç´ ç»„æˆçš„æ•°ç»„ï¼Œå¦‚æœæ²¡æœ‰ä»»ä½•æ•°ç»„å…ƒç´ é€šè¿‡æµ‹è¯•ï¼Œåˆ™è¿”å›ç©ºæ•°ç»„ã€‚

```js
function isBigEnough(element) {
  return element >= 10;
}
let filtered = [12, 5, 8, 130, 44].filter(isBigEnough);
// filtered is [12, 130, 44]
```

### `Array.prototype.forEach()`

[Array.prototype.forEach](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach) å¯¹æ•°ç»„çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€æ¬¡æä¾›çš„å‡½æ•°ã€‚

```js
arr.forEach(callback[, thisArg]);
```

**å‚æ•°**:

`callback` ä¸ºæ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ æ‰§è¡Œçš„å‡½æ•°ï¼Œè¯¥å‡½æ•°æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼š

- currentValue æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ ã€‚
- index å¯é€‰ æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•ã€‚
- array å¯é€‰ `forEach()` æ–¹æ³•æ­£åœ¨æ“ä½œçš„æ•°ç»„ã€‚

`thisArg`å¯é€‰ å¯é€‰å‚æ•°ã€‚å½“æ‰§è¡Œå›è°ƒå‡½æ•°æ—¶ç”¨ä½œ `this` çš„å€¼(å‚è€ƒå¯¹è±¡)ã€‚

```js
const items = ["item1", "item2", "item3"];
const copy = [];

for (let i = 0; i < items.length; i++) {
  copy.push(items[i]);
}

items.forEach(function(item) {
  copy.push(item);
});
```

### `Array.prototype.map()`

[Array.prototype.map](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/map) åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œå…¶ç»“æœæ˜¯è¯¥æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½è°ƒç”¨ä¸€ä¸ªæä¾›çš„å‡½æ•°åè¿”å›çš„ç»“æœã€‚

```js
let new_array = arr.map(function callback(currentValue[, index[, array]]) {
 // Return element for new_array
}[, thisArg])
```

**å‚æ•°**ï¼š

`callback` ç”Ÿæˆæ–°æ•°ç»„å…ƒç´ çš„å‡½æ•°ï¼Œä½¿ç”¨ä¸‰ä¸ªå‚æ•°ï¼š

- currentValue æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ 
- index å¯é€‰ æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•
- array å¯é€‰ åŸæ•°ç»„æœ¬èº«

`thisArg`å¯é€‰ æ‰§è¡Œ callback å‡½æ•°æ—¶ä½¿ç”¨çš„ this å€¼ã€‚

**è¿”å›å€¼**:

ä¸€ä¸ªæ–°æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ éƒ½æ˜¯å›è°ƒå‡½æ•°çš„ç»“æœã€‚

```js
let kvArray = [
  { key: 1, value: 10 },
  { key: 2, value: 20 },
  { key: 3, value: 30 }
];

let reformattedArray = kvArray.map(function(obj) {
  let rObj = {};
  rObj[obj.key] = obj.value;
  return rObj;
});

// reformattedArray æ•°ç»„ä¸ºï¼š [{1: 10}, {2: 20}, {3: 30}],

// kvArray æ•°ç»„æœªè¢«ä¿®æ”¹:
// [{key: 1, value: 10},
//  {key: 2, value: 20},
//  {key: 3, value: 30}]
```

### `Array.prototype.some()`

[Array.prototype.some](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/some)æµ‹è¯•æ˜¯å¦è‡³å°‘æœ‰ä¸€ä¸ªå…ƒç´ å¯ä»¥é€šè¿‡è¢«æä¾›çš„å‡½æ•°æ–¹æ³•ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªBooleanç±»å‹çš„å€¼ã€‚

```js
arr.some(callback(element[, index[, array]])[, thisArg])
```

**å‚æ•°**:

`callback` ç”¨æ¥æµ‹è¯•æ¯ä¸ªå…ƒç´ çš„å‡½æ•°ï¼Œæ¥å—ä¸‰ä¸ªå‚æ•°ï¼š

- element æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å…ƒç´ ã€‚

- index å¯é€‰ æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å…ƒç´ çš„ç´¢å¼•å€¼ã€‚

- arrayå¯é€‰ `some()`è¢«è°ƒç”¨çš„æ•°ç»„ã€‚

`thisArg`å¯é€‰ æ‰§è¡Œ callback æ—¶ä½¿ç”¨çš„ this å€¼ã€‚

**è¿”å›å€¼**:

å¦‚æœå›è°ƒå‡½æ•°è¿”å›è‡³å°‘ä¸€ä¸ªæ•°ç»„å…ƒç´ çš„truthyå€¼ï¼Œåˆ™è¿”å›trueï¼›å¦åˆ™ä¸ºfalseã€‚

```js
[2, 5, 8, 1, 4].some(x => x > 10);  // false
[12, 5, 8, 1, 4].some(x => x > 10); // true
```

## åˆ¤æ–­æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨å€¼

### `Array.prototype.includes()`

[Array.prototype.includes](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/includes)æ–¹æ³•è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŸä¸ªæ•°ç»„æ˜¯å¦åŒ…å«ç»™å®šçš„å€¼ï¼Œä¸å­—ç¬¦ä¸²çš„`includes`æ–¹æ³•ç±»ä¼¼ã€‚ES2016 å¼•å…¥äº†è¯¥æ–¹æ³•ã€‚

```js
[1, 2, 3]
  .includes(2) // true
  [(1, 2, 3)].includes(4) // false
  [(1, 2, NaN)].includes(NaN); // true
```

è¯¥æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæœç´¢çš„èµ·å§‹ä½ç½®ï¼Œé»˜è®¤ä¸º 0ã€‚å¦‚æœç¬¬äºŒä¸ªå‚æ•°ä¸ºè´Ÿæ•°ï¼Œåˆ™è¡¨ç¤ºå€’æ•°çš„ä½ç½®ï¼Œå¦‚æœè¿™æ—¶å®ƒå¤§äºæ•°ç»„é•¿åº¦ï¼ˆæ¯”å¦‚ç¬¬äºŒä¸ªå‚æ•°ä¸º-4ï¼Œä½†æ•°ç»„é•¿åº¦ä¸º 3ï¼‰ï¼Œåˆ™ä¼šé‡ç½®ä¸ºä» 0 å¼€å§‹ã€‚

```js
[1, 2, 3].includes(3, 3); // false
[1, 2, 3].includes(3, -1); // true
```

æ²¡æœ‰è¯¥æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨æ•°ç»„çš„`indexOf`æ–¹æ³•ï¼Œæ£€æŸ¥æ˜¯å¦åŒ…å«æŸä¸ªå€¼ã€‚

```js
if (arr.indexOf(el) !== -1) {
  // ...
}
```

`indexOf`æ–¹æ³•æœ‰ä¸¤ä¸ªç¼ºç‚¹ï¼Œä¸€æ˜¯ä¸å¤Ÿè¯­ä¹‰åŒ–ï¼Œå®ƒçš„å«ä¹‰æ˜¯æ‰¾åˆ°å‚æ•°å€¼çš„ç¬¬ä¸€ä¸ªå‡ºç°ä½ç½®ï¼Œæ‰€ä»¥è¦å»æ¯”è¾ƒæ˜¯å¦ä¸ç­‰äº-1ï¼Œè¡¨è¾¾èµ·æ¥ä¸å¤Ÿç›´è§‚ã€‚äºŒæ˜¯ï¼Œå®ƒå†…éƒ¨ä½¿ç”¨ä¸¥æ ¼ç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ`===`ï¼‰è¿›è¡Œåˆ¤æ–­ï¼Œè¿™ä¼šå¯¼è‡´å¯¹`NaN`çš„è¯¯åˆ¤ã€‚

````js
[NaN].indexOf(NaN)
// -1

`includes`ä½¿ç”¨çš„æ˜¯ä¸ä¸€æ ·çš„åˆ¤æ–­ç®—æ³•ï¼Œå°±æ²¡æœ‰è¿™ä¸ªé—®é¢˜ã€‚

```js
[NaN].includes(NaN)
// true
````

ä¸‹é¢ä»£ç ç”¨æ¥æ£€æŸ¥å½“å‰ç¯å¢ƒæ˜¯å¦æ”¯æŒè¯¥æ–¹æ³•ï¼Œå¦‚æœä¸æ”¯æŒï¼Œéƒ¨ç½²ä¸€ä¸ªç®€æ˜“çš„æ›¿ä»£ç‰ˆæœ¬ã€‚

```js
const contains = (() =>
  Array.prototype.includes
    ? (arr, value) => arr.includes(value)
    : (arr, value) => arr.some(el => el === value))();
contains(["foo", "bar"], "baz"); // => false
```

å¦å¤–ï¼Œ`Map` å’Œ `Set` æ•°æ®ç»“æ„æœ‰ä¸€ä¸ª`has`æ–¹æ³•ï¼Œéœ€è¦æ³¨æ„ä¸`includes`åŒºåˆ†ã€‚

- Map ç»“æ„çš„`has`æ–¹æ³•ï¼Œæ˜¯ç”¨æ¥æŸ¥æ‰¾é”®åçš„ï¼Œæ¯”å¦‚`Map.prototype.has(key)`ã€`WeakMap.prototype.has(key)`ã€`Reflect.has(target, propertyKey)`ã€‚
- Set ç»“æ„çš„`has`æ–¹æ³•ï¼Œæ˜¯ç”¨æ¥æŸ¥æ‰¾å€¼çš„ï¼Œæ¯”å¦‚`Set.prototype.has(value)`ã€`WeakSet.prototype.has(value)`ã€‚

### `Array.prototype.indexOf()`

[Array.prototype.indexOf](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf)æ–¹æ³•è¿”å›åœ¨æ•°ç»„ä¸­å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªç»™å®šå…ƒç´ çš„ç¬¬ä¸€ä¸ªç´¢å¼•ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåˆ™è¿”å›-1ã€‚

```js
arr.indexOf(searchElement)
arr.indexOf(searchElement[, fromIndex = 0])
```

```js
let indices = [];
let array = ["a", "b", "a", "c", "a", "d"];
let element = "a";
let idx = array.indexOf(element);
while (idx != -1) {
  indices.push(idx);
  idx = array.indexOf(element, idx + 1);
}
console.log(indices);
// [0, 2, 4]
```

## æ‹‰å¹³åµŒå¥—çš„æ•°ç»„

### `Array.prototype.flat()` `Array.prototype.flatMap()`

æ•°ç»„çš„æˆå‘˜æœ‰æ—¶è¿˜æ˜¯æ•°ç»„ï¼Œ[Array.prototype.flat](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/flat)ç”¨äºå°†åµŒå¥—çš„æ•°ç»„â€œæ‹‰å¹³â€ï¼Œå˜æˆä¸€ç»´çš„æ•°ç»„ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œå¯¹åŸæ•°æ®æ²¡æœ‰å½±å“ã€‚

```js
[1, 2, [3, 4]].flat();
// [1, 2, 3, 4]
```

`flat()`é»˜è®¤åªä¼šâ€œæ‹‰å¹³â€ä¸€å±‚ï¼Œå¦‚æœæƒ³è¦â€œæ‹‰å¹³â€å¤šå±‚çš„åµŒå¥—æ•°ç»„ï¼Œå¯ä»¥å°†`flat()`æ–¹æ³•çš„å‚æ•°å†™æˆä¸€ä¸ªæ•´æ•°ï¼Œè¡¨ç¤ºæƒ³è¦æ‹‰å¹³çš„å±‚æ•°ï¼Œé»˜è®¤ä¸º 1ã€‚

```js
[1, 2, [3, [4, 5]]].flat()[
  // [1, 2, 3, [4, 5]]

  (1, 2, [3, [4, 5]])
].flat(2);
// [1, 2, 3, 4, 5]
```

å¦‚æœä¸ç®¡æœ‰å¤šå°‘å±‚åµŒå¥—ï¼Œéƒ½è¦è½¬æˆä¸€ç»´æ•°ç»„ï¼Œå¯ä»¥ç”¨`Infinity`å…³é”®å­—ä½œä¸ºå‚æ•°ã€‚

```js
[1, [2, [3]]].flat(Infinity);
// [1, 2, 3]
```

å¦‚æœåŸæ•°ç»„æœ‰ç©ºä½ï¼Œ`flat()`æ–¹æ³•ä¼šè·³è¿‡ç©ºä½ã€‚

```js
[1, 2, , 4, 5].flat();
// [1, 2, 4, 5]
```

[Array.prototype.flatMap](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/flatMap)æ–¹æ³•å¯¹åŸæ•°ç»„çš„æ¯ä¸ªæˆå‘˜æ‰§è¡Œä¸€ä¸ªå‡½æ•°ï¼ˆç›¸å½“äºæ‰§è¡Œ`Array.prototype.map()`ï¼‰ï¼Œç„¶åå¯¹è¿”å›å€¼ç»„æˆçš„æ•°ç»„æ‰§è¡Œ`flat()`æ–¹æ³•ã€‚è¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ï¼Œä¸æ”¹å˜åŸæ•°ç»„ã€‚

```js
// ç›¸å½“äº [[2, 4], [3, 6], [4, 8]].flat()
[2, 3, 4].flatMap(x => [x, x * 2]);
// [2, 4, 3, 6, 4, 8]
```

`flatMap()`åªèƒ½å±•å¼€ä¸€å±‚æ•°ç»„ã€‚

```js
// ç›¸å½“äº [[[2]], [[4]], [[6]], [[8]]].flat()
[1, 2, 3, 4].flatMap(x => [[x * 2]]);
// [[2], [4], [6], [8]]
```

`flatMap()`æ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªéå†å‡½æ•°ï¼Œè¯¥å‡½æ•°å¯ä»¥æ¥å—ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯å½“å‰æ•°ç»„æˆå‘˜ã€å½“å‰æ•°ç»„æˆå‘˜çš„ä½ç½®ï¼ˆä»é›¶å¼€å§‹ï¼‰ã€åŸæ•°ç»„ã€‚

```js
arr.flatMap(function callback(currentValue[, index[, array]]) {
  // ...
}[, thisArg])
```

`flatMap()`æ–¹æ³•è¿˜å¯ä»¥æœ‰ç¬¬äºŒä¸ªå‚æ•°ï¼Œç”¨æ¥ç»‘å®šéå†å‡½æ•°é‡Œé¢çš„`this`ã€‚

## æ•°ç»„åˆå¹¶

### `Array.prototype.concat()`

[Array.prototype.concat](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/concat) æ–¹æ³•ç”¨äºåˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ªæ•°ç»„ã€‚æ­¤æ–¹æ³•ä¸ä¼šæ›´æ”¹ç°æœ‰æ•°ç»„ï¼Œè€Œæ˜¯è¿”å›ä¸€ä¸ªæ–°æ•°ç»„ã€‚

```js
let num1 = [1, 2, 3],
  num2 = [4, 5, 6],
  num3 = [7, 8, 9];

let nums = num1.concat(num2, num3);

console.log(nums);
// results in [1, 2, 3, 4, 5, 6, 7, 8, 9]
```

## æ•°ç»„åˆ†å‰²

### `Array.prototype.join()`

[Array.prototype.join](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/join)æ–¹æ³•å°†ä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼‰çš„æ‰€æœ‰å…ƒç´ è¿æ¥æˆä¸€ä¸ªå­—ç¬¦ä¸²å¹¶è¿”å›è¿™ä¸ªå­—ç¬¦ä¸²ã€‚å¦‚æœæ•°ç»„åªæœ‰ä¸€ä¸ªé¡¹ç›®ï¼Œé‚£ä¹ˆå°†è¿”å›è¯¥é¡¹ç›®è€Œä¸ä½¿ç”¨åˆ†éš”ç¬¦ã€‚

```js
arr.join([separator]);
```

**å‚æ•°**:

`separator` æŒ‡å®šä¸€ä¸ªå­—ç¬¦ä¸²æ¥åˆ†éš”æ•°ç»„çš„æ¯ä¸ªå…ƒç´ ã€‚å¦‚æœéœ€è¦ï¼Œå°†åˆ†éš”ç¬¦è½¬æ¢ä¸ºå­—ç¬¦ä¸²ã€‚å¦‚æœçœç•¥`()`ï¼Œæ•°ç»„å…ƒç´ ç”¨é€—å·åˆ†éš”ã€‚é»˜è®¤ä¸º ","ã€‚å¦‚æœ`separator`æ˜¯ç©ºå­—ç¬¦ä¸²`("")`ï¼Œåˆ™æ‰€æœ‰å…ƒç´ ä¹‹é—´éƒ½æ²¡æœ‰ä»»ä½•å­—ç¬¦ã€‚

**è¿”å›å€¼**:

ä¸€ä¸ªæ‰€æœ‰æ•°ç»„å…ƒç´ è¿æ¥çš„å­—ç¬¦ä¸²ã€‚å¦‚æœ `arr.length` ä¸º 0ï¼Œåˆ™è¿”å›ç©ºå­—ç¬¦ä¸²ã€‚

```js
let a = ["Wind", "Rain", "Fire"];
console.log(a.join()); // "Wind,Rain,Fire"
console.log(a.join(", ")); // "Wind, Rain, Fire"
console.log(a.join(" + ")); // "Wind + Rain + Fire"
console.log(a.join("")); // "WindRainFire"

// è¿æ¥ç±»æ•°ç»„å¯¹è±¡
function f(a, b, c) {
  let s = Array.prototype.join.call(arguments);
  console.log(s); // '1,a,true'
}
f(1, "a", true);
```

## æ•°ç»„å…ƒç´ çš„æ·»åŠ å’Œåˆ é™¤

### `Array.prototype.unshift()`

[Array.prototype.unshift](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/unshift)æ–¹æ³•å°†ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ æ·»åŠ åˆ°æ•°ç»„çš„å¼€å¤´ï¼Œå¹¶è¿”å›è¯¥æ•°ç»„çš„æ–°é•¿åº¦(è¯¥æ–¹æ³•ä¿®æ”¹åŸæœ‰æ•°ç»„)ã€‚

```js
let arr = [1, 2];

arr.unshift(0); // result of the call is 3, which is the new array length
// arr is [0, 1, 2]

arr.unshift(-2, -1); // the new array length is 5
// arr is [-2, -1, 0, 1, 2]

arr.unshift([-4, -3]); // the new array length is 6
// arr is [[-4, -3], -2, -1, 0, 1, 2]

arr.unshift([-7, -6], [-5]); // the new array length is 8
// arr is [ [-7, -6], [-5], [-4, -3], -2, -1, 0, 1, 2 ]
```

### `Array.prototype.push()`

[Array.prototype.push](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/push) å°†ä¸€ä¸ªæˆ–å¤šä¸ªå…ƒç´ æ·»åŠ åˆ°æ•°ç»„çš„æœ«å°¾ï¼Œå¹¶è¿”å›è¯¥æ•°ç»„çš„æ–°é•¿åº¦ã€‚

```js
let sports = ["soccer", "baseball"];
let total = sports.push("football", "swimming");

console.log(sports);
// ["soccer", "baseball", "football", "swimming"]

console.log(total);
// 4
```

åƒæ•°ç»„ä¸€æ ·ä½¿ç”¨å¯¹è±¡

```js
let obj = {
  length: 0,

  addElem: function addElem(elem) {
    // obj.length is automatically incremented
    // every time an element is added.
    [].push.call(this, elem);
  }
};

// Let's add some empty objects just to illustrate.
obj.addElem("aaaa");
obj.addElem("bbbb");
console.log(obj.length);
// â†’ 2
```

### `Array.prototype.shift()`

[Array.prototype.shift](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/shift)ä»æ•°ç»„ä¸­åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ çš„å€¼ã€‚æ­¤æ–¹æ³•æ›´æ”¹æ•°ç»„çš„é•¿åº¦ã€‚

```js
let myFish = ['angel', 'clown', 'mandarin', 'surgeon'];

console.log(myFish);
// angel,clown,mandarin,surgeon"

let shifted = myFish.shift();

console.log(myFish);
// clown,mandarin,surgeon"

console.log(shifted);
// angel"
```

### `Array.prototype.pop()`

[Array.prototype.pop](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/pop)ä»æ•°ç»„ä¸­åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ ï¼Œå¹¶è¿”å›è¯¥å…ƒç´ çš„å€¼ã€‚æ­¤æ–¹æ³•æ›´æ”¹æ•°ç»„çš„é•¿åº¦ã€‚

```js
let myFish = ["angel", "clown", "mandarin", "surgeon"];
let popped = myFish.pop();

console.log(myFish);
// ["angel", "clown", "mandarin"]
console.log(popped);
// surgeon
```

### `Array.prototype.splice()`

[Array.prototype.splice](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/splice)é€šè¿‡åˆ é™¤æˆ–æ›¿æ¢ç°æœ‰å…ƒç´ æˆ–è€…åŸåœ°æ·»åŠ æ–°çš„å…ƒç´ æ¥ä¿®æ”¹æ•°ç»„,å¹¶ä»¥æ•°ç»„å½¢å¼è¿”å›è¢«ä¿®æ”¹çš„å†…å®¹ã€‚æ­¤æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„ã€‚

```js
array.splice(start[, deleteCount[, item1[, item2[, ...]]]])
```

**å‚æ•°**:

`start`â€‹ æŒ‡å®šä¿®æ”¹çš„å¼€å§‹ä½ç½®ï¼ˆä»0è®¡æ•°ï¼‰ã€‚

- å¦‚æœè¶…å‡ºäº†æ•°ç»„çš„é•¿åº¦ï¼Œåˆ™ä»æ•°ç»„æœ«å°¾å¼€å§‹æ·»åŠ å†…å®¹ï¼›

- å¦‚æœæ˜¯è´Ÿå€¼ï¼Œåˆ™è¡¨ç¤ºä»æ•°ç»„æœ«ä½å¼€å§‹çš„ç¬¬å‡ ä½ï¼ˆä»-1è®¡æ•°ï¼Œè¿™æ„å‘³ç€-næ˜¯å€’æ•°ç¬¬nä¸ªå…ƒç´ å¹¶ä¸”ç­‰ä»·äº`array.length-n`ï¼‰ï¼›

- å¦‚æœè´Ÿæ•°çš„ç»å¯¹å€¼å¤§äºæ•°ç»„çš„é•¿åº¦ï¼Œåˆ™è¡¨ç¤ºå¼€å§‹ä½ç½®ä¸ºç¬¬0ä½ã€‚

`deleteCount` å¯é€‰ æ•´æ•°ï¼Œè¡¨ç¤ºè¦ç§»é™¤çš„æ•°ç»„å…ƒç´ çš„ä¸ªæ•°ã€‚

- å¦‚æœ deleteCount å¤§äº start ä¹‹åçš„å…ƒç´ çš„æ€»æ•°ï¼Œåˆ™ä» start åé¢çš„å…ƒç´ éƒ½å°†è¢«åˆ é™¤ï¼ˆå«ç¬¬ start ä½ï¼‰ã€‚

- å¦‚æœ deleteCount è¢«çœç•¥äº†ï¼Œæˆ–è€…å®ƒçš„å€¼å¤§äºç­‰äº`array.length - start`(ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœå®ƒå¤§äºæˆ–è€…ç­‰äºstartä¹‹åçš„æ‰€æœ‰å…ƒç´ çš„æ•°é‡)ï¼Œé‚£ä¹ˆstartä¹‹åæ•°ç»„çš„æ‰€æœ‰å…ƒç´ éƒ½ä¼šè¢«åˆ é™¤ã€‚

- å¦‚æœ deleteCount æ˜¯ 0 æˆ–è€…è´Ÿæ•°ï¼Œåˆ™ä¸ç§»é™¤å…ƒç´ ã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œè‡³å°‘åº”æ·»åŠ ä¸€ä¸ªæ–°å…ƒç´ ã€‚

`item1, item2, ...` å¯é€‰ è¦æ·»åŠ è¿›æ•°ç»„çš„å…ƒç´ ,ä»start ä½ç½®å¼€å§‹ã€‚å¦‚æœä¸æŒ‡å®šï¼Œåˆ™ `splice()` å°†åªåˆ é™¤æ•°ç»„å…ƒç´ ã€‚

**è¿”å›å€¼**:

ç”±è¢«åˆ é™¤çš„å…ƒç´ ç»„æˆçš„ä¸€ä¸ªæ•°ç»„ã€‚å¦‚æœåªåˆ é™¤äº†ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™è¿”å›åªåŒ…å«ä¸€ä¸ªå…ƒç´ çš„æ•°ç»„ã€‚å¦‚æœæ²¡æœ‰åˆ é™¤å…ƒç´ ï¼Œåˆ™è¿”å›ç©ºæ•°ç»„ã€‚

```js
let myFish = ['angel', 'clown', 'trumpet', 'sturgeon'];
let removed = myFish.splice(0, 2, 'parrot', 'anemone', 'blue');
console.log(myFish);
//["parrot", "anemone", "blue", "trumpet", "sturgeon"]
console.log(removed);
// ["angel", "clown"]
```

## æ•°ç»„æå–

### `Array.prototype.slice()`

[Array.prototype.slice](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/slice)è¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„å¯¹è±¡ï¼Œè¿™ä¸€å¯¹è±¡æ˜¯ä¸€ä¸ªç”± begin å’Œ end å†³å®šçš„åŸæ•°ç»„çš„æµ…æ‹·è´ï¼ˆåŒ…æ‹¬ beginï¼Œä¸åŒ…æ‹¬endï¼‰ã€‚åŸå§‹æ•°ç»„ä¸ä¼šè¢«æ”¹å˜ã€‚

```js
arr.slice([begin[, end]])
```

**å‚æ•°**:

`begin` å¯é€‰ æå–èµ·å§‹å¤„çš„ç´¢å¼•ï¼Œä»è¯¥ç´¢å¼•å¼€å§‹æå–åŸæ•°ç»„å…ƒç´ ï¼Œé»˜è®¤ä¸º 0ã€‚

- å¦‚æœè¯¥å‚æ•°ä¸ºè´Ÿæ•°ï¼Œåˆ™è¡¨ç¤ºä»åŸæ•°ç»„ä¸­çš„å€’æ•°ç¬¬å‡ ä¸ªå…ƒç´ å¼€å§‹æå–ï¼Œ`slice(-2)` è¡¨ç¤ºæå–åŸæ•°ç»„ä¸­çš„å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ åˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆåŒ…å«æœ€åä¸€ä¸ªå…ƒç´ ï¼‰ã€‚

- å¦‚æœçœç•¥ beginï¼Œåˆ™ slice ä»ç´¢å¼• 0 å¼€å§‹ã€‚

- å¦‚æœ begin å¤§äºåŸæ•°ç»„çš„é•¿åº¦ï¼Œåˆ™ä¼šè¿”å›ç©ºæ•°ç»„ã€‚

`end` å¯é€‰ æå–ç»ˆæ­¢å¤„çš„ç´¢å¼•ï¼Œåœ¨è¯¥ç´¢å¼•å¤„ç»“æŸæå–åŸæ•°ç»„å…ƒç´ ï¼Œé»˜è®¤ä¸º 0ã€‚

- slice ä¼šæå–åŸæ•°ç»„ä¸­ç´¢å¼•ä» begin åˆ° end çš„æ‰€æœ‰å…ƒç´ ï¼ˆåŒ…å« beginï¼Œä½†ä¸åŒ…å« endï¼‰ã€‚

- `slice(1,4)` ä¼šæå–åŸæ•°ç»„ä¸­ä»ç¬¬äºŒä¸ªå…ƒç´ å¼€å§‹ä¸€ç›´åˆ°ç¬¬å››ä¸ªå…ƒç´ çš„æ‰€æœ‰å…ƒç´  ï¼ˆç´¢å¼•ä¸º 1, 2, 3çš„å…ƒç´ ï¼‰ã€‚

- å¦‚æœè¯¥å‚æ•°ä¸ºè´Ÿæ•°ï¼Œ åˆ™å®ƒè¡¨ç¤ºåœ¨åŸæ•°ç»„ä¸­çš„å€’æ•°ç¬¬å‡ ä¸ªå…ƒç´ ç»“æŸæŠ½å–ã€‚ `slice(-2,-1)` è¡¨ç¤ºæŠ½å–äº†åŸæ•°ç»„ä¸­çš„å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ åˆ°æœ€åä¸€ä¸ªå…ƒç´ ï¼ˆä¸åŒ…å«æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä¹Ÿå°±æ˜¯åªæœ‰å€’æ•°ç¬¬äºŒä¸ªå…ƒç´ ï¼‰ã€‚

- å¦‚æœ end è¢«çœç•¥ï¼Œåˆ™slice ä¼šä¸€ç›´æå–åˆ°åŸæ•°ç»„æœ«å°¾ã€‚

- å¦‚æœ end å¤§äºæ•°ç»„çš„é•¿åº¦ï¼Œslice ä¹Ÿä¼šä¸€ç›´æå–åˆ°åŸæ•°ç»„æœ«å°¾ã€‚

**è¿”å›å€¼**:

ä¸€ä¸ªå«æœ‰è¢«æå–å…ƒç´ çš„æ–°æ•°ç»„ã€‚

```js
let fruits = ['Banana', 'Orange', 'Lemon', 'Apple', 'Mango'];
let citrus = fruits.slice(1, 3);

// fruits contains ['Banana', 'Orange', 'Lemon', 'Apple', 'Mango']
// citrus contains ['Orange','Lemon']
```

## æ•°ç»„è½¬å­—ç¬¦ä¸²

### `Array.prototype.toString()`

[Array.prototype.toString](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/toString)è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºæŒ‡å®šçš„æ•°ç»„åŠå…¶å…ƒç´ ã€‚

## æ•°ç»„æ’åº

### `Array.prototype.sort()`

[Array.prototype.sort](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/sort)å¯¹æ•°ç»„çš„å…ƒç´ è¿›è¡Œæ’åºï¼Œå¹¶è¿”å›æ•°ç»„ã€‚

```js
arr.sort([compareFunction])
```

**å‚æ•°**:

`compareFunction` å¯é€‰ ç”¨æ¥æŒ‡å®šæŒ‰æŸç§é¡ºåºè¿›è¡Œæ’åˆ—çš„å‡½æ•°ã€‚å¦‚æœçœç•¥ï¼Œå…ƒç´ æŒ‰ç…§è½¬æ¢ä¸ºçš„å­—ç¬¦ä¸²çš„å„ä¸ªå­—ç¬¦çš„Unicodeä½ç‚¹è¿›è¡Œæ’åºã€‚

- firstEl ç¬¬ä¸€ä¸ªç”¨äºæ¯”è¾ƒçš„å…ƒç´ 
- secondEl ç¬¬äºŒä¸ªç”¨äºæ¯”è¾ƒçš„å…ƒç´ 

**è¿”å›å€¼**:

æ’åºåçš„æ•°ç»„ã€‚è¯·æ³¨æ„ï¼Œæ•°ç»„å·²åŸåœ°æ’åºï¼Œå¹¶ä¸”ä¸è¿›è¡Œå¤åˆ¶ã€‚

**æè¿°**ï¼š

å¦‚æœæŒ‡æ˜äº† compareFunction ï¼Œé‚£ä¹ˆæ•°ç»„ä¼šæŒ‰ç…§è°ƒç”¨è¯¥å‡½æ•°çš„è¿”å›å€¼æ’åºã€‚å³ a å’Œ b æ˜¯ä¸¤ä¸ªå°†è¦è¢«æ¯”è¾ƒçš„å…ƒç´ ï¼š

- å¦‚æœ `compareFunction(a, b)` å°äº 0 ï¼Œé‚£ä¹ˆ a ä¼šè¢«æ’åˆ—åˆ° b ä¹‹å‰ï¼›

- å¦‚æœ `compareFunction(a, b)` ç­‰äº 0 ï¼Œ a å’Œ b çš„ç›¸å¯¹ä½ç½®ä¸å˜ã€‚å¤‡æ³¨ï¼š ECMAScript æ ‡å‡†å¹¶ä¸ä¿è¯è¿™ä¸€è¡Œä¸ºï¼Œè€Œä¸”ä¹Ÿä¸æ˜¯æ‰€æœ‰æµè§ˆå™¨éƒ½ä¼šéµå®ˆï¼ˆä¾‹å¦‚ Mozilla åœ¨ 2003 å¹´ä¹‹å‰çš„ç‰ˆæœ¬ï¼‰ï¼›

- å¦‚æœ `compareFunction(a, b)` å¤§äº 0 ï¼Œ b ä¼šè¢«æ’åˆ—åˆ° a ä¹‹å‰ã€‚

- `compareFunction(a, b)` å¿…é¡»æ€»æ˜¯å¯¹ç›¸åŒçš„è¾“å…¥è¿”å›ç›¸åŒçš„æ¯”è¾ƒç»“æœï¼Œå¦åˆ™æ’åºçš„ç»“æœå°†æ˜¯ä¸ç¡®å®šçš„ã€‚

æ‰€ä»¥ï¼Œæ¯”è¾ƒå‡½æ•°æ ¼å¼å¦‚ä¸‹ï¼š

```js
function compare(a, b) {
  if (a < b ) {           // æŒ‰æŸç§æ’åºæ ‡å‡†è¿›è¡Œæ¯”è¾ƒ, a å°äº b
    return -1;
  }
  if (a > b ) {
    return 1;
  }
  // a must be equal to b
  return 0;
}
```

è¦æ¯”è¾ƒæ•°å­—è€Œéå­—ç¬¦ä¸²ï¼Œæ¯”è¾ƒå‡½æ•°å¯ä»¥ç®€å•çš„ä»¥ a å‡ bï¼Œå¦‚ä¸‹çš„å‡½æ•°å°†ä¼šå°†æ•°ç»„å‡åºæ’åˆ—

```js
function compareNumbers(a, b) {
  return a - b;
}
```

`sort` æ–¹æ³•å¯ä»¥ä½¿ç”¨ å‡½æ•°è¡¨è¾¾å¼ æ–¹ä¾¿åœ°ä¹¦å†™ï¼š

```js
let numbers = [4, 2, 5, 1, 3];
numbers.sort(function(a, b) {
  return a - b;
});
console.log(numbers);

// ä¹Ÿå¯ä»¥å†™æˆï¼š
var numbers = [4, 2, 5, 1, 3];
numbers.sort((a, b) => a - b);
console.log(numbers);

// [1, 2, 3, 4, 5]
```

#### ä½¿ç”¨æ˜ å°„æ”¹å–„æ’åº

```js
// éœ€è¦è¢«æ’åºçš„æ•°ç»„
let list = ['Delta', 'alpha', 'CHARLIE', 'bravo'];

// å¯¹éœ€è¦æ’åºçš„æ•°å­—å’Œä½ç½®çš„ä¸´æ—¶å­˜å‚¨
let mapped = list.map(function(el, i) {
    return { index: i, value: el.toLowerCase() };
})

// æŒ‰ç…§å¤šä¸ªå€¼æ’åºæ•°ç»„
mapped.sort(function(a, b) {
    return +(a.value > b.value) || +(a.value === b.value) - 1;
});

// æ ¹æ®ç´¢å¼•å¾—åˆ°æ’åºçš„ç»“æœ
let result = mapped.map(function(el){
    return list[el.index];
});

// Â ["alpha", "bravo", "CHARLIE", "Delta"]
```

## reducer å‡½æ•°

### `Array.prototype.reduce()`

[Array.prototype.reduce](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce)å¯¹æ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ æ‰§è¡Œä¸€ä¸ªç”±æ‚¨æä¾›çš„ reducer å‡½æ•°(å‡åºæ‰§è¡Œ)ï¼Œå°†å…¶ç»“æœæ±‡æ€»ä¸ºå•ä¸ªè¿”å›å€¼ã€‚

```js
arr.reduce(callback(accumulator, currentValue[, index[, array]])[, initialValue])
```

**å‚æ•°**:

`callback` æ‰§è¡Œæ•°ç»„ä¸­æ¯ä¸ªå€¼çš„å‡½æ•°ï¼ŒåŒ…å«å››ä¸ªå‚æ•°ï¼š

- accumulator ç´¯è®¡å™¨ç´¯è®¡å›è°ƒçš„è¿”å›å€¼; å®ƒæ˜¯ä¸Šä¸€æ¬¡è°ƒç”¨å›è°ƒæ—¶è¿”å›çš„ç´¯ç§¯å€¼ï¼Œæˆ– initialValueï¼ˆè§äºä¸‹æ–¹ï¼‰ã€‚

- currentValue æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å…ƒç´ ã€‚

- currentIndex å¯é€‰ æ•°ç»„ä¸­æ­£åœ¨å¤„ç†çš„å½“å‰å…ƒç´ çš„ç´¢å¼•ã€‚ å¦‚æœæä¾›äº† initialValueï¼Œåˆ™èµ·å§‹ç´¢å¼•å·ä¸º 0ï¼Œå¦åˆ™ä¸º 1ã€‚

- array å¯é€‰ è°ƒç”¨`reduce()`çš„æ•°ç»„

`initialValue`å¯é€‰ ä½œä¸ºç¬¬ä¸€æ¬¡è°ƒç”¨ callback å‡½æ•°æ—¶çš„ç¬¬ä¸€ä¸ªå‚æ•°çš„å€¼ã€‚ å¦‚æœæ²¡æœ‰æä¾›åˆå§‹å€¼ï¼Œåˆ™å°†ä½¿ç”¨æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ ã€‚ åœ¨æ²¡æœ‰åˆå§‹å€¼çš„ç©ºæ•°ç»„ä¸Šè°ƒç”¨ reduce å°†æŠ¥é”™ã€‚

**è¿”å›å€¼**:

å‡½æ•°ç´¯è®¡å¤„ç†çš„ç»“æœ

#### æ•°ç»„é‡Œæ‰€æœ‰å€¼çš„å’Œ

```js
let total = [0, 1, 2, 3].reduce((acc, cur) => acc + cur, 0);
```

#### ç´¯åŠ å¯¹è±¡æ•°ç»„é‡Œçš„å€¼

```js
let initialValue = 0;
let sum = [{ x: 1 }, { x: 2 }, { x: 3 }].reduce(
  (accumulator, currentValue) => accumulator + currentValue.x,
  initialValue
);

console.log(sum); // logs 6
```

#### è®¡ç®—æ•°ç»„ä¸­æ¯ä¸ªå…ƒç´ å‡ºç°çš„æ¬¡æ•°

```js
let names = ["Alice", "Bob", "Tiff", "Bruce", "Alice"];

let countedNames = names.reduce(function(allNames, name) {
  if (name in allNames) {
    allNames[name]++;
  } else {
    allNames[name] = 1;
  }
  return allNames;
}, {});
// countedNames is:
// { 'Alice': 2, 'Bob': 1, 'Tiff': 1, 'Bruce': 1 }
```

#### æŒ‰å±æ€§å¯¹objectåˆ†ç±»

```js
let people = [
    { name: 'Alice', age: 21 },
    { name: 'Max', age: 20 },
    { name: 'Jane', age: 20 }
];

function groupBy(objectArray, property) {
    return objectArray.reduce(function (acc, obj) {
        let key = obj[property];
        if (!acc[key]) {
            acc[key] = [];
        }
        acc[key].push(obj);
        return acc;
    }, {});
}

let groupedPeople = groupBy(people, 'age');
// groupedPeople is:
// {
//   20: [
//     { name: 'Max', age: 20 },
//     { name: 'Jane', age: 20 }
//   ],
//   21: [{ name: 'Alice', age: 21 }]
// }
```

#### ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦å’ŒinitialValueç»‘å®šåŒ…å«åœ¨å¯¹è±¡æ•°ç»„ä¸­çš„æ•°ç»„

```js
// friends - å¯¹è±¡æ•°ç»„
// where object field "books" - list of favorite books
let friends = [{
    name: 'Anna',
    books: ['Bible', 'Harry Potter'],
    age: 21
}, {
    name: 'Bob',
    books: ['War and peace', 'Romeo and Juliet'],
    age: 26
}, {
    name: 'Alice',
    books: ['The Lord of the Rings', 'The Shining'],
    age: 18
}];

// allbooks - list which will contain all friends' books +  
// additional list contained in initialValue
let allbooks = friends.reduce(function(prev, curr) {
    return [...prev, ...curr.books];
}, ['Alphabet']);

// allbooks = [
//   'Alphabet', 'Bible', 'Harry Potter', 'War and peace', 
//   'Romeo and Juliet', 'The Lord of the Rings',
//   'The Shining'
// ]
```

#### æ•°ç»„å»é‡

```js
let arr = [1,2,1,2,3,5,4,5,3,4,4,4,4];
let result = arr.sort().reduce((init, current) => {
    if(init.length === 0 || init[init.length-1] !== current) {
        init.push(current);
    }
    return init;
}, []);
console.log(result); //[1,2,3,4,5]
```

#### åŠŸèƒ½å‹å‡½æ•°ç®¡é“

```js
// Building-blocks to use for composition
const double = x => x + x;
const triple = x => 3 * x;
const quadruple = x => 4 * x;

// Function composition enabling pipe functionality
const pipe = (...functions) => input => functions.reduce(
    (acc, fn) => fn(acc),
    input
);

// Composed functions for multiplication of specific values
const multiply6 = pipe(double, triple);
const multiply9 = pipe(triple, triple);
const multiply16 = pipe(quadruple, quadruple);
const multiply24 = pipe(double, triple, quadruple);

// Usage
multiply6(6); // 36
multiply9(9); // 81
multiply16(16); // 256
multiply24(10); // 240
```

## æ•°ç»„å…ƒç´ ä½ç½®é¢ å€’

### `Array.prototype.reverse()`

`Array.prototype.reverse` å°†æ•°ç»„ä¸­å…ƒç´ çš„ä½ç½®é¢ å€’ï¼Œå¹¶è¿”å›è¯¥æ•°ç»„ã€‚è¯¥æ–¹æ³•ä¼šæ”¹å˜åŸæ•°ç»„ã€‚

```js
let sourceArray = ['one', 'two', 'three'];
let reverseArray = sourceArray.reverse();

console.log(sourceArray ) // ['three', 'two', 'one']
console.log(sourceArray === reverseArray); // true
```

## æ•°ç»„çš„ç©ºä½

æ•°ç»„çš„ç©ºä½æŒ‡ï¼Œæ•°ç»„çš„æŸä¸€ä¸ªä½ç½®æ²¡æœ‰ä»»ä½•å€¼ã€‚æ¯”å¦‚ï¼Œ`Array`æ„é€ å‡½æ•°è¿”å›çš„æ•°ç»„éƒ½æ˜¯ç©ºä½ã€‚

```js
Array(3); // [, , ,]
```

ä¸Šé¢ä»£ç ä¸­ï¼Œ`Array(3)`è¿”å›ä¸€ä¸ªå…·æœ‰ 3 ä¸ªç©ºä½çš„æ•°ç»„ã€‚

æ³¨æ„ï¼Œç©ºä½ä¸æ˜¯`undefined`ï¼Œä¸€ä¸ªä½ç½®çš„å€¼ç­‰äº`undefined`ï¼Œä¾ç„¶æ˜¯æœ‰å€¼çš„ã€‚ç©ºä½æ˜¯æ²¡æœ‰ä»»ä½•å€¼ï¼Œ`in`è¿ç®—ç¬¦å¯ä»¥è¯´æ˜è¿™ä¸€ç‚¹ã€‚

```js
0 in [undefined, undefined, undefined]; // true
0 in [, , ,]; // false
```

ä¸Šé¢ä»£ç è¯´æ˜ï¼Œç¬¬ä¸€ä¸ªæ•°ç»„çš„ 0 å·ä½ç½®æ˜¯æœ‰å€¼çš„ï¼Œç¬¬äºŒä¸ªæ•°ç»„çš„ 0 å·ä½ç½®æ²¡æœ‰å€¼ã€‚

ES5 å¯¹ç©ºä½çš„å¤„ç†ï¼Œå·²ç»å¾ˆä¸ä¸€è‡´äº†ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ä¼šå¿½ç•¥ç©ºä½ã€‚

- `forEach()`, `filter()`, `reduce()`, `every()` å’Œ`some()`éƒ½ä¼šè·³è¿‡ç©ºä½ã€‚
- `map()`ä¼šè·³è¿‡ç©ºä½ï¼Œä½†ä¼šä¿ç•™è¿™ä¸ªå€¼
- `join()`å’Œ`toString()`ä¼šå°†ç©ºä½è§†ä¸º`undefined`ï¼Œè€Œ`undefined`å’Œ`null`ä¼šè¢«å¤„ç†æˆç©ºå­—ç¬¦ä¸²ã€‚

```js
// forEachæ–¹æ³•
[,'a'].forEach((x,i) => console.log(i)); // 1

// filteræ–¹æ³•
['a',,'b'].filter(x => true) // ['a','b']

// everyæ–¹æ³•
[,'a'].every(x => x==='a') // true

// reduceæ–¹æ³•
[1,,2].reduce((x,y) => x+y) // 3

// someæ–¹æ³•
[,'a'].some(x => x !== 'a') // false

// mapæ–¹æ³•
[,'a'].map(x => 1) // [,1]

// joinæ–¹æ³•
[,'a',undefined,null].join('#') // "#a##"

// toStringæ–¹æ³•
[,'a',undefined,null].toString() // ",a,,"
```

ES6 åˆ™æ˜¯æ˜ç¡®å°†ç©ºä½è½¬ä¸º`undefined`ã€‚

`Array.from`æ–¹æ³•ä¼šå°†æ•°ç»„çš„ç©ºä½ï¼Œè½¬ä¸º`undefined`ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªæ–¹æ³•ä¸ä¼šå¿½ç•¥ç©ºä½ã€‚

```js
Array.from(["a", , "b"]);
// [ "a", undefined, "b" ]
```

æ‰©å±•è¿ç®—ç¬¦ï¼ˆ`...`ï¼‰ä¹Ÿä¼šå°†ç©ºä½è½¬ä¸º`undefined`ã€‚

```js
[...["a", , "b"]];
// [ "a", undefined, "b" ]
```

`copyWithin()`ä¼šè¿ç©ºä½ä¸€èµ·æ‹·è´ã€‚

```js
[, "a", "b", ,].copyWithin(2, 0); // [,"a",,"a"]
```

`fill()`ä¼šå°†ç©ºä½è§†ä¸ºæ­£å¸¸çš„æ•°ç»„ä½ç½®ã€‚

```js
new Array(3).fill("a"); // ["a","a","a"]
```

`for...of`å¾ªç¯ä¹Ÿä¼šéå†ç©ºä½ã€‚

```js
let arr = [, ,];
for (let i of arr) {
  console.log(1);
}
// 1
// 1
```

ä¸Šé¢ä»£ç ä¸­ï¼Œæ•°ç»„`arr`æœ‰ä¸¤ä¸ªç©ºä½ï¼Œ`for...of`å¹¶æ²¡æœ‰å¿½ç•¥å®ƒä»¬ã€‚å¦‚æœæ”¹æˆ`map`æ–¹æ³•éå†ï¼Œç©ºä½æ˜¯ä¼šè·³è¿‡çš„ã€‚

`entries()`ã€`keys()`ã€`values()`ã€`find()`å’Œ`findIndex()`ä¼šå°†ç©ºä½å¤„ç†æˆ`undefined`ã€‚

```js
// entries()
[...[,'a'].entries()] // [[0,undefined], [1,"a"]]

// keys()
[...[,'a'].keys()] // [0,1]

// values()
[...[,'a'].values()] // [undefined,"a"]

// find()
[,'a'].find(x => true) // undefined

// findIndex()
[,'a'].findIndex(x => true) // 0
```

ç”±äºç©ºä½çš„å¤„ç†è§„åˆ™éå¸¸ä¸ç»Ÿä¸€ï¼Œæ‰€ä»¥å»ºè®®é¿å…å‡ºç°ç©ºä½ã€‚

___

## `in`

å¦‚æœæŒ‡å®šçš„å±æ€§åœ¨æŒ‡å®šçš„å¯¹è±¡æˆ–å…¶åŸå‹é“¾ä¸­ï¼Œåˆ™`in` è¿ç®—ç¬¦è¿”å›`true`ã€‚

```js
prop in object
```

**å‚æ•°**:

`prop` ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹æˆ–è€… symbol ç±»å‹çš„å±æ€§åæˆ–è€…æ•°ç»„ç´¢å¼•ï¼ˆésymbolç±»å‹å°†ä¼šå¼ºåˆ¶è½¬ä¸ºå­—ç¬¦ä¸²ï¼‰ã€‚

`objectName` æ£€æŸ¥å®ƒï¼ˆæˆ–å…¶åŸå‹é“¾ï¼‰æ˜¯å¦åŒ…å«å…·æœ‰æŒ‡å®šåç§°çš„å±æ€§çš„å¯¹è±¡ã€‚

```js
// æ•°ç»„
let trees = new Array("redwood", "bay", "cedar", "oak", "maple");

0 in trees        // è¿”å›true
3 in trees        // è¿”å›true
6 in trees        // è¿”å›false

"bay" in trees    // è¿”å›false (å¿…é¡»ä½¿ç”¨ç´¢å¼•å·,è€Œä¸æ˜¯æ•°ç»„å…ƒç´ çš„å€¼)

"length" in trees // è¿”å›true (lengthæ˜¯ä¸€ä¸ªæ•°ç»„å±æ€§)

Symbol.iterator in trees // è¿”å›true (æ•°ç»„å¯è¿­ä»£ï¼Œåªåœ¨ES2015+ä¸Šæœ‰æ•ˆ)


// å†…ç½®å¯¹è±¡
"PI" in Math          // è¿”å›true

// è‡ªå®šä¹‰å¯¹è±¡
let mycar = {make: "Honda", model: "Accord", year: 1998};

"make" in mycar  // è¿”å›true
"model" in mycar // è¿”å›true
```

[ğŸ”—å‚è§](http://es6.ruanyifeng.com/#docs/array)
