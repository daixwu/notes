# Number å¯¹è±¡æ“ä½œ

## `Number.isFinite()` æ£€æŸ¥æ•°å€¼æ˜¯å¦ä¸ºæœ‰é™çš„

å’Œå…¨å±€çš„ `isFinite()` å‡½æ•°ç›¸æ¯”ï¼Œè¿™ä¸ªæ–¹æ³•ä¸ä¼šå¼ºåˆ¶å°†ä¸€ä¸ªéæ•°å€¼çš„å‚æ•°è½¬æ¢æˆæ•°å€¼ï¼Œè¿™å°±æ„å‘³ç€ï¼Œåªæœ‰æ•°å€¼ç±»å‹çš„å€¼ï¼Œä¸”æ˜¯æœ‰ç©·çš„ï¼ˆfiniteï¼‰ï¼Œæ‰è¿”å› trueã€‚

```js
isFinite(25) // true
isFinite("25") // true

Number.isFinite(25) // true
Number.isFinite("25") // false
```

## `Number.isNaN()` æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦ä¸ºNaN

åœ¨ JavaScript ä¸­ï¼Œ`NaN` æœ€ç‰¹æ®Šçš„åœ°æ–¹å°±æ˜¯ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨ç›¸ç­‰è¿ç®—ç¬¦ï¼ˆ`==` å’Œ `===`ï¼‰æ¥åˆ¤æ–­ä¸€ä¸ªå€¼æ˜¯å¦æ˜¯ `NaN`ï¼Œå› ä¸º `NaN == NaN` å’Œ `NaN === NaN` éƒ½ä¼šè¿”å› `false`ã€‚å› æ­¤ï¼Œå¿…é¡»è¦æœ‰ä¸€ä¸ªåˆ¤æ–­å€¼æ˜¯å¦æ˜¯ `NaN` çš„æ–¹æ³•ã€‚

å’Œå…¨å±€å‡½æ•° `isNaN()` ç›¸æ¯”ï¼Œè¯¥æ–¹æ³•ä¸ä¼šå¼ºåˆ¶å°†å‚æ•°è½¬æ¢æˆæ•°å­—ï¼Œåªæœ‰åœ¨å‚æ•°æ˜¯çœŸæ­£çš„æ•°å­—ç±»å‹ï¼Œä¸”å€¼ä¸º `NaN` çš„æ—¶å€™æ‰ä¼šè¿”å› `true`ã€‚

```js
isNaN(NaN) // true
isNaN("NaN") // true
Number.isNaN(NaN) // true
Number.isNaN("NaN") // false
Number.isNaN(1) // false
```

## `Number.parseInt()` å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å€¼

```js
// ES5çš„å†™æ³•
parseInt('12.34') // 12

// ES6çš„å†™æ³•
Number.parseInt('12.34') // 12
```

## `Number.parseFloat()` å­—ç¬¦ä¸²è½¬æ¢æˆæ•°å€¼

```js
// ES5çš„å†™æ³•
parseFloat('123.45#') // 123.45

// ES6çš„å†™æ³•
Number.parseFloat('123.45#') // 123.45
```

## `Number.isInteger()` åˆ¤æ–­æ•°å€¼æ˜¯å¦ä¸ºæ•´æ•°

å¦‚æœè¢«æ£€æµ‹çš„å€¼æ˜¯æ•´æ•°ï¼Œåˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚æ³¨æ„ NaN å’Œæ­£è´Ÿ Infinity ä¸æ˜¯æ•´æ•°ã€‚

```js
Number.isInteger(1);         // true
Number.isInteger(-100000);   // true

Number.isInteger(Infinity);  // false
Number.isInteger(-Infinity); // false
Number.isInteger("10");      // false
Number.isInteger([1]);       // false
```

## `Number.EPSILON` æå°çš„å¸¸é‡

æ ¹æ®è§„æ ¼ï¼Œå®ƒè¡¨ç¤º 1 ä¸å¤§äº 1 çš„æœ€å°æµ®ç‚¹æ•°ä¹‹é—´çš„å·®ã€‚

å¯¹äº 64 ä½æµ®ç‚¹æ•°æ¥è¯´ï¼Œå¤§äº 1 çš„æœ€å°æµ®ç‚¹æ•°ç›¸å½“äºäºŒè¿›åˆ¶çš„ `1.00..001`ï¼Œå°æ•°ç‚¹åé¢æœ‰è¿ç»­ 51 ä¸ªé›¶ã€‚è¿™ä¸ªå€¼å‡å» 1 ä¹‹åï¼Œå°±ç­‰äº 2 çš„ -52 æ¬¡æ–¹ã€‚

```js
Number.EPSILON === Math.pow(2, -52)
// true
Number.EPSILON
// 2.220446049250313e-16
Number.EPSILON.toFixed(20)
// "0.00000000000000022204"
```

`Number.EPSILON`å®é™…ä¸Šæ˜¯ JavaScript èƒ½å¤Ÿè¡¨ç¤ºçš„æœ€å°ç²¾åº¦ã€‚è¯¯å·®å¦‚æœå°äºè¿™ä¸ªå€¼ï¼Œå°±å¯ä»¥è®¤ä¸ºå·²ç»æ²¡æœ‰æ„ä¹‰äº†ï¼Œå³ä¸å­˜åœ¨è¯¯å·®äº†ã€‚

å¼•å…¥ä¸€ä¸ªè¿™ä¹ˆå°çš„é‡çš„ç›®çš„ï¼Œåœ¨äºä¸ºæµ®ç‚¹æ•°è®¡ç®—ï¼Œè®¾ç½®ä¸€ä¸ªè¯¯å·®èŒƒå›´ã€‚æˆ‘ä»¬çŸ¥é“æµ®ç‚¹æ•°è®¡ç®—æ˜¯ä¸ç²¾ç¡®çš„ã€‚

```js
0.1 + 0.2
// 0.30000000000000004

0.1 + 0.2 - 0.3
// 5.551115123125783e-17

5.551115123125783e-17.toFixed(20)
// '0.00000000000000005551'
```

ä¸Šé¢ä»£ç è§£é‡Šäº†ï¼Œä¸ºä»€ä¹ˆæ¯”è¾ƒ`0.1 + 0.2`ä¸`0.3`å¾—åˆ°çš„ç»“æœæ˜¯`false`ã€‚

```js
0.1 + 0.2 === 0.3 // false
```

`Number.EPSILON`å¯ä»¥ç”¨æ¥è®¾ç½®â€œèƒ½å¤Ÿæ¥å—çš„è¯¯å·®èŒƒå›´â€ã€‚æ¯”å¦‚ï¼Œè¯¯å·®èŒƒå›´è®¾ä¸º 2 çš„-50 æ¬¡æ–¹ï¼ˆå³`Number.EPSILON * Math.pow(2, 2)`ï¼‰ï¼Œå³å¦‚æœä¸¤ä¸ªæµ®ç‚¹æ•°çš„å·®å°äºè¿™ä¸ªå€¼ï¼Œæˆ‘ä»¬å°±è®¤ä¸ºè¿™ä¸¤ä¸ªæµ®ç‚¹æ•°ç›¸ç­‰ã€‚

```js
function withinErrorMargin (left, right) {
  return Math.abs(left - right) < Number.EPSILON * Math.pow(2, 2);
}

0.1 + 0.2 === 0.3 // false
withinErrorMargin(0.1 + 0.2, 0.3) // true

1.1 + 1.3 === 2.4 // false
withinErrorMargin(1.1 + 1.3, 2.4) // true
```

## `Number.isSafeInteger()` å®‰å…¨æ•´æ•°

JavaScript èƒ½å¤Ÿå‡†ç¡®è¡¨ç¤ºçš„æ•´æ•°èŒƒå›´åœ¨ -2 çš„ 53 æ¬¡æ–¹åˆ° 2çš„ 53 æ¬¡æ–¹ä¹‹é—´ï¼ˆä¸å«ä¸¤ä¸ªç«¯ç‚¹ï¼‰ï¼Œè¶…è¿‡è¿™ä¸ªèŒƒå›´ï¼Œæ— æ³•ç²¾ç¡®è¡¨ç¤ºè¿™ä¸ªå€¼ã€‚

ES6 å¼•å…¥äº†`Number.MAX_SAFE_INTEGER`å’Œ`Number.MIN_SAFE_INTEGER`è¿™ä¸¤ä¸ªå¸¸é‡ï¼Œç”¨æ¥è¡¨ç¤ºè¿™ä¸ªèŒƒå›´çš„ä¸Šä¸‹é™ã€‚

```js
Number.MAX_SAFE_INTEGER === Math.pow(2, 53) - 1
// true
Number.MAX_SAFE_INTEGER === 9007199254740991
// true

Number.MIN_SAFE_INTEGER === -Number.MAX_SAFE_INTEGER
// true
Number.MIN_SAFE_INTEGER === -9007199254740991
// true
```

`Number.isSafeInteger()`åˆ™æ˜¯ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªæ•´æ•°æ˜¯å¦è½åœ¨è¿™ä¸ªèŒƒå›´ä¹‹å†…ã€‚

```js
function trusty (left, right, result) {
  if (
    Number.isSafeInteger(left) &&
    Number.isSafeInteger(right) &&
    Number.isSafeInteger(result)
  ) {
    return result;
  }
  throw new RangeError('Operation cannot be trusted!');
}

trusty(9007199254740993, 990, 9007199254740993 - 990)
// RangeError: Operation cannot be trusted!

trusty(1, 2, 3)
// 3
```

## `toFixed()` é™åˆ¶å°æ•°ç‚¹åä½æ•° å››èˆäº”å…¥

```js
let numObj = 12345.6789;

numObj.toFixed(); // è¿”å› "12346"ï¼šè¿›è¡Œå››èˆäº”å…¥ï¼Œä¸åŒ…æ‹¬å°æ•°éƒ¨åˆ†
numObj.toFixed(1); // è¿”å› "12345.7"ï¼šè¿›è¡Œå››èˆäº”å…¥
numObj.toFixed(6); // è¿”å› "12345.678900"ï¼šç”¨0å¡«å……
```

[ğŸ”—å‚è§](http://es6.ruanyifeng.com/#docs/number)
